{% extends 'surveys/base_surveys.html' %}
{% block tab_list %}active{% endblock %}
{% if survey.responses %}
{% block tab_responses %}
  <li class="nav-item">
    <a class="nav-link" href="{% url 'survey-response' pk=survey.id %}">Survey Results</a>
  </li>
{% endblock %}
{% endif %}

{% block card%}
<div class="d-flex justify-content-between">
  <div class="p-3">
    <p class="lead">Questions</p>
    <a href="{% url 'question-create' pk=survey.id %}?project={{  project.id }}">Add Question</a>
    <table class="table">
      <thead>
        <tr>
          <th>Question</th>
          <th>Kind</th>
          <th>Sound</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for question in survey.question_set.all %}
        <tr>
          <td>{{ question.body }}</td> 
          <td>{{ question.get_kind_display }}</td>
          <td>{% if question.sound %}Yes{% else %}No{% endif %}</td>
          <td><a href="{% url 'question-delete' pk=question.survey.id question_pk=question.id%}">x</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="p-3">
    <p class="lead">Sending To</p>
    <a href="{% url 'contact-create' %}?project={{ survey.project.id }}">Add Contact</a>
    <table class="table">
      <thead>
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Phone</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for contact in survey.respondents.all %}
        <tr>
          <td>{{ contact.first_name }}</td> 
          <td>{{ contact.last_name }}</td>
          <td>{{ contact.phone }}</td>
          <td><a href="{% url 'contact-remove' pk=contact.id %}?survey={{ survey.id }}">x</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>
 
<form method="POST" action="">

  {% csrf_token %}
  <div class="p-3">
    <input type="submit" class="btn btn-primary" value="Send Survey">
  </div>

</form>
{% endblock %}